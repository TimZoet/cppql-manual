To select rows in a table, you can construct a \gls{select_one_class} object from a \gls{typed_table_class}. This object holds a statement of the form \newline \code{SELECT <cols> FROM <table> WHERE <expr>}. See Listing~\ref{lst:select:create}.

\lstinputlisting[caption={Creating a select statement.}, label={lst:select:create}]{snippets/select_create.cpp}

The first parameter is the expression by which to filter. The second parameter indicates whether expression parameters should be bound immediately upon creation. After construction, the object can be iterated over one or more times to retrieve the results. See Listing~\ref{lst:select:iterate}.

\lstinputlisting[caption={Retrieving select results.}, label={lst:select:iterate}]{snippets/select_iterate.cpp}

Iterating over the select object will first reset the statement. If you want to (re)bind parameters, call \code{operator(true)} before iteration. Since this operator returns a reference to the select object itself, you can e.g. use it in a range based for loop: \code{for (auto row : select(true))\{...\}}.

Some notes on the internal implementation details. Calling the \code{begin} method will run \code{sqlite3\_step} and return an iterator. Each time the iterator is incremented, \code{sqlite3\_step} is called. The \code{end} method returns a dummy iterator value. The end of the sequence is determined using the return code of \code{sqlite3\_step}.

\subsection{Custom Return Types}
\label{section:select:custom}

It is also possible to use custom return types, instead of just tuples. To do so, pass your type as the first template parameter to the \code{select} method. The only requirement on the type is that it has a constructor that takes all selected column values. See Listing~\ref{lst:select:custom_type}.

\lstinputlisting[caption={Retrieve results as custom type.}, label={lst:select:custom_type}]{snippets/select_custom_type.cpp}

\subsection{Containers}
\label{section:select:container}

Since the \code{Select} class has a \code{begin} and \code{end} method, you can also directly construct e.g. a \code{std::vector} from it. See Listing~\ref{lst:select:to_container}.

\lstinputlisting[caption={Constructing a vector from a select object.}, label={lst:select:to_container}]{snippets/select_to_container.cpp}

%TODO: SelectOne, SelectAll.