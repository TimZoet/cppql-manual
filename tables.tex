% TODO: Initialization of existing tables. sqlite_ tables are ignored.
% TODO: Getting tables.

\subsection{Creating Tables}
\label{section:tables:create}

New tables can be created through the \code{createTable} method of the database. It returns a reference to a new \code{Table} instance. The table has a method to create new \code{Column}s. In turn, this object has some methods to set e.g. not null contraints. None of these functions actually run any SQL statements. This is done once you call the table's \code{commit} method.  A full example is shown in Listing~\ref{lst:tables:create}.

\lstinputlisting[caption={Creating a table.}, label={lst:tables:create}]{snippets/create_table.cpp}

Since the \code{createColumn} and \code{set} methods all return a reference to the column, you can also chain calls like in Listing~\ref{lst:tables:chain}.

\lstinputlisting[caption={Chaining column calls.}, label={lst:tables:chain}]{snippets/column_method_chain.cpp}

Adding a foreign key column is straightforward. Just replace the type parameter by another column object. See Listing~\ref{lst:tables:fk}.

\lstinputlisting[caption={Creating a foreign key.}, label={lst:tables:fk}]{snippets/column_fk.cpp}

\subsection{Registering Tables}
\label{section:tables:register}

\subsection{Deleting Tables}
\label{section:tables:delete}

\subsection{Typed Tables}
\label{section:tables:typed}

The \code{Table} class does not offer much in terms of type safety or extensive interfaces. For that, there is the \code{TypedTable} class. It can be constructed by passing it a normal table and allows you to specify a static type for each column. Listing~\ref{lst:tables:typed} shows how to create one using the table that was created in Listing~\ref{lst:tables:create}.

\lstinputlisting[caption={Creating a typed table.}, label={lst:tables:typed}]{snippets/create_typed_table.cpp}

Since sqlite's columns are very flexibly typed, you too have some options when it comes to column types. For example, the first column does not need to be of type \code{int64}. Any integral type will do. Similarly, the last column type is specified to be an array of doubles, but can be of any pointer type, since sqlite just stores raw BLOBs.

%Section~\ref{section:hli} explains how to use the typed tables to construct type safe queries.